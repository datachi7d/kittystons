import kittystons.frigate as frigate


def test_handle_end_event():
    #message_raw = """{"before": {"id": "1632602506.425496-rugjk3", "camera": "driveway", "frame_time": 1632602512.225951, "label": "person", "top_score": 0.71484375, "false_positive": false, "start_time": 1632602506.425496, "end_time": null, "score": 0.609375, "box": [108, 765, 340, 1070], "area": 70760, "region": [62, 759, 382, 1079], "current_zones": [], "entered_zones": [], "thumbnail": null}, "after": {"id": "1632602506.425496-rugjk3", "camera": "driveway", "frame_time": 1632602512.225951, "label": "person", "top_score": 0.71484375, "false_positive": false, "start_time": 1632602506.425496, "end_time": 1632602519.624316, "score": 0.609375, "box": [108, 765, 340, 1070], "area": 70760, "region": [62, 759, 382, 1079], "current_zones": [], "entered_zones": [], "thumbnail": null}, "type": "end"}"""
    #message_raw = """{"before": {"id": "1632602505.063225-p0n8u4", "camera": "driveway", "frame_time": 1632602511.822734, "label": "person", "top_score": 0.8046875, "false_positive": false, "start_time": 1632602505.063225, "end_time": null, "score": 0.796875, "box": [1060, 562, 1422, 1041], "area": 173398, "region": [962, 404, 1638, 1080], "current_zones": [], "entered_zones": [], "thumbnail": null}, "after": {"id": "1632602505.063225-p0n8u4", "camera": "driveway", "frame_time": 1632602515.223562, "label": "person", "top_score": 0.83203125, "false_positive": false, "start_time": 1632602505.063225, "end_time": 1632602521.225289, "score": 0.76953125, "box": [813, 498, 1065, 981], "area": 121716, "region": [452, 0, 1920, 1468], "current_zones": [], "entered_zones": [], "thumbnail": null}, "type": "end"}"""
    #message_raw = """{"before": {"id": "1632617916.277976-pa4bfh", "camera": "driveway", "frame_time": 1632617916.676188, "label": "bird", "top_score": 0.734375, "false_positive": false, "start_time": 1632617916.277976, "end_time": null, "score": 0.734375, "box": [869, 514, 909, 579], "area": 2600, "region": [749, 426, 1049, 726], "current_zones": [], "entered_zones": [], "thumbnail": null}, "after": {"id": "1632617916.277976-pa4bfh", "camera": "driveway", "frame_time": 1632617921.283271, "label": "bird", "top_score": 0.734375, "false_positive": false, "start_time": 1632617916.277976, "end_time": 1632617926.480208, "score": 0.51171875, "box": [41, 485, 123, 518], "area": 2706, "region": [0, 354, 300, 654], "current_zones": [], "entered_zones": [], "thumbnail": null}, "type": "end"}"""
    message_raw = """{"before": {"id": "1632624384.070629-vgesey", "camera": "driveway", "frame_time": 1632624421.867169, "label": "person", "top_score": 0.82421875, "false_positive": false, "start_time": 1632624384.070629, "end_time": null, "score": 0.55859375, "box": [1455, 936, 1722, 1080], "area": 38448, "region": [120, 0, 1920, 1800], "current_zones": [], "entered_zones": [], "thumbnail": null}, "after": {"id": "1632624384.070629-vgesey", "camera": "driveway", "frame_time": 1632624421.867169, "label": "person", "top_score": 0.82421875, "false_positive": false, "start_time": 1632624384.070629, "end_time": 1632624427.067643, "score": 0.55859375, "box": [1455, 936, 1722, 1080], "area": 38448, "region": [120, 0, 1920, 1800], "current_zones": [], "entered_zones": [], "thumbnail": null}, "type": "end"}"""
    output_message = frigate.handle_frigate_event("frigate.srv.datach17d.com", message_raw)
    assert True

def test_mqtt():
    frigate.run_mqtt("x3250m4.srv.datach17d.com", "frigate.srv.datach17d.com")
    assert True